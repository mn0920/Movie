<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="kr.min.movie.dao.AdminDao">

  <select id="getMovie" resultType="kr.min.movie.vo.MovieVo">
    select * from movie
  </select>
  <select id="getGenre" resultType="kr.min.movie.vo.GenreVo">
    select * from genre
  </select>
  <select id="getActor" resultType="kr.min.movie.vo.ActorVo">
    select * from actor
  </select>
  <select id="getDirector" resultType="kr.min.movie.vo.DirectorVo">
    select * from director  
  </select>
  <select id="getDirectorList" resultType="kr.min.movie.vo.DirectorMovieVo">
    select * from m_director_list where #{DirectorMovieVo.director_id}
  </select>
  <!-- <select id="getDirector" resultType="kr.min.movie.vo.DirectorMovieVo">
    select * from director where director_name like CONCAT('%',#{name},'%')  
  </select> -->
  <select id="getMovieId" resultType="Integer">
    select max(id) from movie
  </select>
  <select id="getDirectorOneMovie" resultType="kr.min.movie.vo.DirectorMovieVo">
  select movie.id, movie.title, director.director_id, director.director_name from director
    left join m_director_list on m_director_list.director_id = director.director_id
    left join movie on m_director_list.director_list = movie.id;
  </select>
  <insert id="addMovie">
    insert into movie
      (title, rate, synopsis)
    value
      (#{movieVo.title}, #{movieVo.rate}, #{movieVo.synopsis});
  </insert>
  <insert id="addActor">
      insert into actor
        (actor_name, actor_img, actor_birth, actor_country, actor_gender, actor_story, a_trophy_list)
      value
        (#{actorVo.actor_name}, #{actorVo.actor_img}, #{actorVo.actor_birth},
         #{actorVo.actor_country}, #{actorVo.actor_gender}, #{actorVo.actor_story}, #{actorVo.a_trophy_list});
  </insert>
  <insert id="addDirector">
      insert into director
        (director_name, director_img, director_birth, director_gender, director_story, d_trophy_list)
      value
        (#{directorVo.director_name}, #{directorVo.director_img}, #{directorVo.director_birth},
         #{directorVo.director_gender}, #{directorVo.director_story}, #{directorVo.d_trophy_list});
  </insert>
  
</mapper>